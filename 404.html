<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <title>跳转到验证码工具</title>
    <script>
        const REPO_PATH = "/2FA"; // 你的仓库名，必须和GitHub仓库名一致
        
        // 防止循环重定向
        if (sessionStorage.getItem('redirected') === 'true') {
            window.location.replace(`${REPO_PATH}/?nocache`);
            sessionStorage.removeItem('redirected');
        } else {
            sessionStorage.setItem('redirected', 'true');
            
            // 提取路径中的密钥（适配子路径）
            let path = window.location.pathname;
            path = path.replace(REPO_PATH, ''); // 移除仓库名前缀
            let secret = path.slice(1); // 去掉开头的"/"
            
            // 清理Base32无效字符
            secret = secret.replace(/[^A-Za-z2-7=]/g, '');
            
            // 重定向到主页面
            if (secret && secret.length > 0) {
                window.location.replace(`${REPO_PATH}/?nocache&secret=${encodeURIComponent(secret)}`);
            } else {
                window.location.replace(`${REPO_PATH}/?nocache`);
            }
        }
    </script>
</head>
<body>
    <p>正在跳转到验证码工具...</p>
</body>
</html>
